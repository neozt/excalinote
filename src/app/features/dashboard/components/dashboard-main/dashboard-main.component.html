<div class="main">
  <div class="button-container">
    <button id="toggleButton" (click)="toggleMode()">
      {{ mode() === "read" ? "Read Mode" : "Write Mode" }}
    </button>
  </div>
  @if (mode() === "write") {
    <div
      id="wrapper"
      [ngStyle]="{
        'border-width.px': BORDER_WIDTH,
        'height.px': editorHeight(),
      }"
    >
      <div
        #writeNotebook
        id="writeNotebook"
        contenteditable="true"
        data-placeholder="Start writing your thoughts..."
        [innerText]="content()"
        [ngStyle]="{
          'line-height.px': LINE_HEIGHT,
        }"
        (keydown.tab)="handleTab($event)"
        (blur)="onContentChange(writeNotebook.innerText)"
      ></div>
    </div>
  } @else {
    <div
      #readWrapper
      id="readWrapper"
      [ngStyle]="{
        'border-width.px': BORDER_WIDTH,
        'height.px': editorHeight(),
      }"
      (onResize)="readViewHeight.set(readWrapper.clientHeight)"
    >
      <div
        #readNotebook
        id="readNotebook"
        [ngStyle]="{
          'line-height.px': LINE_HEIGHT,
        }"
        (onResize)="readTotalHeight.set(readNotebook.scrollHeight)"
        [innerText]="content()"
        [style.transform]="'translateY(-' + readOffset() + 'px)'"
      ></div>
    </div>
    <div class="button-container">
      <button
        id="prevButton"
        [attr.disabled]="currentPageCapped() === 1 ? 'true' : null"
        (click)="previousPage()"
      >
        <-- Prev
      </button>
      <button
        id="nextButton"
        [attr.disabled]="currentPageCapped() === maxPage() ? 'true' : null"
        (click)="nextPage()"
      >
        Next -->
      </button>
    </div>
    <div id="pageIndicator">Page {{ currentPageCapped() }}/{{ maxPage() }}</div>
  }
</div>
