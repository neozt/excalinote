<div class="main">
  <div class="button-container">
    <button id="toggleButton" (click)="toggleMode()">
      {{ mode() === "read" ? "Read Mode" : "Write Mode" }}
    </button>
  </div>
  <!-- TODO clean up HTML and CSS -->
  @if (mode() === "write") {
    <div
      id="wrapper"
      [ngStyle]="{
        'border-width.px': BORDER_WIDTH,
        'height.px': editorHeight(),
      }"
    >
      <div
        id="writeNotebook"
        [ngStyle]="{
          'line-height.px': LINE_HEIGHT,
        }"
      >
        <div
          class="font-bold text-2xl text-center"
          [style.margin-bottom.px]="LINE_HEIGHT"
        >
          {{ selectedNote()?.title }}
        </div>

        <div
          #writeTextArea
          class="outline-0"
          contenteditable="true"
          data-placeholder="Start writing your thoughts..."
          [innerText]="content()"
          (keydown.tab)="handleTab($event)"
          (blur)="onContentChange(writeTextArea.innerText)"
        ></div>
      </div>
    </div>
  } @else {
    <div
      #readWrapper
      id="readWrapper"
      [ngStyle]="{
        'border-width.px': BORDER_WIDTH,
        'height.px': editorHeight(),
      }"
      (onResize)="readViewHeight.set(readWrapper.clientHeight)"
    >
      <div
        #readNotebook
        id="readNotebook"
        [ngStyle]="{
          'line-height.px': LINE_HEIGHT,
        }"
        (onResize)="readTotalHeight.set(readNotebook.scrollHeight)"
        [style.transform]="'translateY(-' + readOffset() + 'px)'"
      >
        <div
          class="font-bold text-2xl text-center"
          [style.margin-bottom.px]="LINE_HEIGHT"
        >
          {{ selectedNote()?.title }}
        </div>
        <div [innerText]="content()"></div>
      </div>
    </div>
    <div class="button-container">
      <button
        id="prevButton"
        [attr.disabled]="currentPageCapped() === 1 ? 'true' : null"
        (click)="previousPage()"
      >
        <-- Prev
      </button>
      <button
        id="nextButton"
        [attr.disabled]="currentPageCapped() === maxPage() ? 'true' : null"
        (click)="nextPage()"
      >
        Next -->
      </button>
    </div>
    <div id="pageIndicator">Page {{ currentPageCapped() }}/{{ maxPage() }}</div>
  }
</div>
