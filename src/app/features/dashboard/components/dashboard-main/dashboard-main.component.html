<div class="main">
  <div class="button-container">
    <button id="toggleButton" (click)="toggleMode()">
      {{ mode() === "read" ? "Read Mode" : "Write Mode" }}
    </button>
  </div>
  @if (mode() === "write") {
    <div id="wrapper">
      <div
        #writeNotebook
        id="writeNotebook"
        contenteditable="true"
        data-placeholder="Start writing your thoughts..."
        [innerText]="content()"
        (keydown.tab)="handleTab($event)"
        (blur)="onContentChange(writeNotebook.innerText)"
      ></div>
    </div>
  } @else {
    <div
      #readWrapper
      id="readWrapper"
      (onResize)="readViewHeight.set(readWrapper.clientHeight)"
    >
      <div
        #readNotebook
        id="readNotebook"
        (onResize)="readTotalHeight.set(readNotebook.scrollHeight)"
        [innerText]="content()"
        [style.transform]="'translateY(-' + readOffset() + 'px)'"
      ></div>
    </div>
    <div class="button-container">
      <button
        id="prevButton"
        [attr.disabled]="currentPageCapped() === 1 ? 'true' : null"
        (click)="previousPage()"
      >
        <-- Prev
      </button>
      <button
        id="nextButton"
        [attr.disabled]="currentPageCapped() === maxPage() ? 'true' : null"
        (click)="nextPage()"
      >
        Next -->
      </button>
    </div>
    <div id="pageIndicator">Page {{ currentPageCapped() }}/{{ maxPage() }}</div>
  }
</div>
